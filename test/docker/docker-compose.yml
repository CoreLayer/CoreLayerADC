version: '3'
services:
  corelayer-nginx-red:
    build: nginx-red/.
    image: corelayer-nginx-red
    container_name: corelayer-nginx-red
    ports:
    - "8081:80"
  corelayer-nginx-green:
    build: nginx-green/.
    image: corelayer-nginx-green
    container_name: corelayer-nginx-green
    ports:
    - "8082:80"
  corelayer-nginx-blue:
    build: nginx-blue/.
    image: corelayer-nginx-blue
    container_name: corelayer-nginx-blue
    ports:
    - "8083:80"
  # corelayer-cpx:
  #   container_name: corelayer-cpx
  #   image: store/citrix/netscalercpx:12.0-56.20
  #   depends_on: 
  #     - corelayer-nginx-red
  #     - corelayer-nginx-green
  #     - corelayer-nginx-blue
  #   ports:
  #     - "8022:22"
  #     - "8080:80"
  #     - "8443:443"
  #     - "8161:161/udp"
  #     - "30000:30000"
  #   tty: true
  #   privileged: true
  #   cap_add: 
  #     - NET_ADMIN
  #   volumes:
  #      - $PWD/cpx:/var/tmp/corelayer/config:ro
  #   environment: 
  #     - EULA=yes
  #     - CPX_CORES=1
  #     - NS_HTTP_PORT=8080
  #     - NS_HTTPS_PORT=8443
  #     - NS_SSH_PORT=8022
  #     - NS_SNMP_PORT=8161
  #     - NS_ROUTABLE=FALSE
  # corelayer-installer:
  #   build: installer/.
  #   image: corelayer-installer
  #   container_name: corelayer-installer
  #   depends_on: 
  #     - corelayer-cpx
  #   tty: true

  
